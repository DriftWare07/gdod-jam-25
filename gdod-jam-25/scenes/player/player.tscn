[gd_scene load_steps=18 format=3 uid="uid://bxccx43ua8hgq"]

[ext_resource type="Script" path="res://scenes/player/player.gd" id="1_1jfvs"]
[ext_resource type="SpriteFrames" uid="uid://br5woktbyhfk2" path="res://scenes/player/playerframes.tres" id="1_miq4j"]
[ext_resource type="Script" path="res://addons/shaker/src/Vector2/shaker_component2D.gd" id="2_cw312"]
[ext_resource type="Texture2D" uid="uid://b5x8vr822pve2" path="res://assets/gdodjam25tiles.png" id="2_ybbbr"]
[ext_resource type="Script" path="res://addons/shaker/data/Vector2/BaseShakerType2D.gd" id="3_t0gkm"]
[ext_resource type="Script" path="res://addons/shaker/data/Single/BaseShakerType1D.gd" id="4_kvuxx"]
[ext_resource type="SpriteFrames" uid="uid://cjje8uhj174is" path="res://scenes/player/gunframes.tres" id="5_leyk3"]
[ext_resource type="Script" path="res://addons/shaker/data/Vector2/ShakerPreset2D.gd" id="6_6w8ue"]
[ext_resource type="Script" path="res://addons/shaker/data/Vector2/ShakerTypeAudioBus2D.gd" id="7_c1xko"]
[ext_resource type="Theme" uid="uid://2bek0awd3xii" path="res://assets/main_theme.tres" id="10_owkt0"]
[ext_resource type="Script" path="res://scenes/player/hud.gd" id="11_pllkt"]
[ext_resource type="Script" path="res://scripts/healthcomponent.gd" id="12_2nf2k"]
[ext_resource type="Script" path="res://scripts/hitbox.gd" id="13_3k6dn"]

[sub_resource type="CircleShape2D" id="CircleShape2D_dwp0u"]
radius = 7.07107

[sub_resource type="Resource" id="Resource_6gcn8"]
script = ExtResource("7_c1xko")
bus_name = "sfx"
min_frequence = Vector2(20, 20)
max_frequence = Vector2(20000, 20000)
amplitude = Vector2(10, 10)
offset = Vector2(0, 0)
BlendingMode = 0
fade_in = -4.0
fade_out = 0.0
start_percent = 0.3
end_percent = 1.0
_temp_graph = false
bake_internal = 64

[sub_resource type="Resource" id="Resource_6a8ul"]
script = ExtResource("6_6w8ue")
PositionShake = Array[ExtResource("3_t0gkm")]([SubResource("Resource_6gcn8")])
RotationShake = Array[ExtResource("4_kvuxx")]([])
ScaleShake = Array[ExtResource("3_t0gkm")]([])
bake_internal = 64
__follow_timeline = false

[sub_resource type="CircleShape2D" id="CircleShape2D_4ckqc"]
radius = 8.90608

[node name="player" type="CharacterBody2D"]
position = Vector2(0.0949757, 0.137363)
script = ExtResource("1_1jfvs")
speed = 1500
accel = 1.3
decel = 2.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_dwp0u")

[node name="legs" type="AnimatedSprite2D" parent="."]
scale = Vector2(1.2, 1.2)
sprite_frames = ExtResource("1_miq4j")
animation = &"idle"
autoplay = "idle"
frame = 1
frame_progress = 0.110374

[node name="body" type="Sprite2D" parent="."]
texture = ExtResource("2_ybbbr")
region_enabled = true
region_rect = Rect2(64, 0, 16, 16)

[node name="gunsprite" type="AnimatedSprite2D" parent="body"]
position = Vector2(24, 8.5)
sprite_frames = ExtResource("5_leyk3")
animation = &"rifle"
autoplay = "default"

[node name="muzzle" type="Node2D" parent="body"]
position = Vector2(11.905, 5.86264)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(-0.150734, -0.0705515)
zoom = Vector2(4, 4)
rotation_smoothing_enabled = true

[node name="ShakerComponent2D" type="Node2D" parent="Camera2D" node_paths=PackedStringArray("Targets")]
script = ExtResource("2_cw312")
custom_target = true
Targets = [NodePath("..")]
AutoPlay = true
shakerPreset = SubResource("Resource_6a8ul")

[node name="firetimer" type="Timer" parent="."]
one_shot = true

[node name="bullet_sound" type="AudioStreamPlayer2D" parent="."]
position = Vector2(8.90502, 4.86264)
max_polyphony = 10

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="CanvasLayer" node_paths=PackedStringArray("hp")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("10_owkt0")
script = ExtResource("11_pllkt")
hp = NodePath("../../Health_Component")

[node name="weaponPanel" type="Panel" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -294.0
offset_top = -122.0
offset_right = 41.0
offset_bottom = 10.0
grow_horizontal = 0
grow_vertical = 0

[node name="gun" type="RichTextLabel" parent="CanvasLayer/Control/weaponPanel"]
layout_mode = 0
offset_left = 38.0
offset_top = 7.0
offset_right = 290.0
offset_bottom = 47.0
text = "Dual Pistols"

[node name="ammo" type="RichTextLabel" parent="CanvasLayer/Control/weaponPanel"]
layout_mode = 0
offset_left = 98.0
offset_top = 49.0
offset_right = 256.0
offset_bottom = 105.0
theme_override_font_sizes/normal_font_size = 48
text = "17/17"

[node name="healthPanel" type="Panel" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -26.0
offset_top = -8.0
offset_right = 323.0
offset_bottom = 86.0

[node name="healthbar" type="ProgressBar" parent="CanvasLayer/Control/healthPanel"]
layout_mode = 0
offset_left = 39.0
offset_top = 15.0
offset_right = 332.0
offset_bottom = 77.0
value = 50.0

[node name="Health_Component" type="Node" parent="." node_paths=PackedStringArray("host")]
script = ExtResource("12_2nf2k")
host = NodePath("..")

[node name="hitbox" type="Area2D" parent="." node_paths=PackedStringArray("health_component")]
script = ExtResource("13_3k6dn")
health_component = NodePath("../Health_Component")

[node name="CollisionShape2D" type="CollisionShape2D" parent="hitbox"]
shape = SubResource("CircleShape2D_4ckqc")
debug_color = Color(0.739454, 0, 0.0252916, 0.42)

[connection signal="timeout" from="firetimer" to="." method="_on_firetimer_timeout"]
